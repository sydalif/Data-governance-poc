<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Governance Quiz</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      background: #f8f9fa;
      padding: 20px;
      color: #1a1a1a;
    }

    h1 {
      color: #003366;
      text-align: center;
      margin-bottom: 1.5em;
    }

    form {
      background: #fff;
      padding: 25px 30px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .question {
      margin-bottom: 25px;
    }

    .question h3 {
      margin-bottom: 10px;
      color: #004080;
    }

    label {
      display: block;
      margin-bottom: 6px;
      cursor: pointer;
    }

    input[type="checkbox"], input[type="radio"] {
      margin-right: 8px;
    }

    button {
      background-color: #003366;
      color: white;
      border: none;
      padding: 14px 30px;
      font-size: 1.1rem;
      border-radius: 5px;
      cursor: pointer;
      margin: 20px auto;
      display: block;
      width: 200px;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #002244;
    }

    .result {
      background: #e9f0f7;
      border-left: 5px solid #003366;
      padding: 15px 20px;
      margin-top: 20px;
      border-radius: 4px;
    }

    .incorrect {
      border-left-color: #cc0000;
      background: #f9d6d5;
    }

    .highlight-incorrect {
      color: #cc0000;
      font-weight: bold;
      margin-top: 8px;
    }

    .review-link {
      margin-top: 5px;
      font-size: 0.9rem;
    }

    .review-link a {
      color: #003366;
      text-decoration: underline;
      cursor: pointer;
    }

    #certificate {
      display: none;
      margin-top: 30px;
      padding: 25px;
      background-color: #ffffff;
      border: 2px solid #003366;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }

    #certificate h2 {
      color: #003366;
      margin-bottom: 20px;
    }

    #certificate p {
      font-size: 1.1rem;
      margin: 10px 0;
    }
  </style>
</head>
<body>

<h1>Annual Data Governance Quiz</h1>

<form id="quizForm">

  <!-- Questions (Add more if needed) -->
  <div class="question" data-topic="Data Governance">
    <h3>1. What is the purpose of data governance?</h3>
    <label><input type="radio" name="q1" value="a" /> To manage data via policies and responsibilities</label>
    <label><input type="radio" name="q1" value="b" /> To store as much data as possible</label>
    <label><input type="radio" name="q1" value="c" /> To allow unrestricted access</label>
  </div>

  <div class="question" data-topic="Data Quality">
    <h3>2. Which of these are data quality dimensions? (Select all that apply)</h3>
    <label><input type="checkbox" name="q2" value="accuracy" /> Accuracy</label>
    <label><input type="checkbox" name="q2" value="completeness" /> Completeness</label>
    <label><input type="checkbox" name="q2" value="popularity" /> Popularity</label>
    <label><input type="checkbox" name="q2" value="timeliness" /> Timeliness</label>
  </div>

  <div class="question" data-topic="Data Protection">
    <h3>3. Under PDPA, what should staff do if they suspect a data breach?</h3>
    <label><input type="radio" name="q3" value="a" /> Ignore it</label>
    <label><input type="radio" name="q3" value="b" /> Report it to the Data Protection Officer</label>
    <label><input type="radio" name="q3" value="c" /> Delete the data silently</label>
  </div>

  <div class="question" data-topic="Data Access and Exploitation">
    <h3>4. What is responsible data fusion?</h3>
    <label><input type="radio" name="q4" value="a" /> Deleting redundant data</label>
    <label><input type="radio" name="q4" value="b" /> Combining multiple data sources ethically for insights</label>
    <label><input type="radio" name="q4" value="c" /> Sharing all data openly</label>
  </div>

  <div class="question" data-topic="Key Staff Responsibilities">
    <h3>5. Which are staff responsibilities? (Select all that apply)</h3>
    <label><input type="checkbox" name="q5" value="follow_procedures" /> Follow procedures</label>
    <label><input type="checkbox" name="q5" value="ignore_issues" /> Ignore anomalies</label>
    <label><input type="checkbox" name="q5" value="report_issues" /> Report data issues</label>
    <label><input type="checkbox" name="q5" value="training" /> Participate in training</label>
  </div>

  <div class="question" data-topic="Data Quality">
    <h3>6. Why is completeness important in data?</h3>
    <label><input type="radio" name="q6" value="a" /> It saves space</label>
    <label><input type="radio" name="q6" value="b" /> It ensures all necessary fields are filled</label>
    <label><input type="radio" name="q6" value="c" /> It helps guess missing info</label>
  </div>

  <div class="question" data-topic="Data Protection">
    <h3>7. How should data no longer needed be handled?</h3>
    <label><input type="radio" name="q7" value="a" /> Backed up forever</label>
    <label><input type="radio" name="q7" value="b" /> Securely disposed of</label>
    <label><input type="radio" name="q7" value="c" /> Shared with third parties</label>
  </div>

  <div class="question" data-topic="Data Access and Exploitation">
    <h3>8. What ensures ethical data exploitation?</h3>
    <label><input type="radio" name="q8" value="a" /> No rules at all</label>
    <label><input type="radio" name="q8" value="b" /> Clear policies, controls and audit logs</label>
    <label><input type="radio" name="q8" value="c" /> Full open access</label>
  </div>

  <div class="question" data-topic="Data Governance">
    <h3>9. Who is accountable for data protection and quality?</h3>
    <label><input type="radio" name="q9" value="a" /> Everyone in the agency</label>
    <label><input type="radio" name="q9" value="b" /> Only the IT team</label>
    <label><input type="radio" name="q9" value="c" /> External vendors</label>
  </div>

  <div class="question" data-topic="Key Staff Responsibilities">
    <h3>10. What are examples of poor data governance? (Select all that apply)</h3>
    <label><input type="checkbox" name="q10" value="weak_controls" /> Weak access controls</label>
    <label><input type="checkbox" name="q10" value="ignored_training" /> Skipping required training</label>
    <label><input type="checkbox" name="q10" value="secure_systems" /> Using approved systems</label>
    <label><input type="checkbox" name="q10" value="unreported_issues" /> Not reporting data issues</label>
  </div>

  <button type="submit">Submit</button>
</form>

<div id="certificate">
  <h2>Annual Data Governance Training Acknowledgement</h2>
  <p>This is to acknowledge that <strong id="certName"></strong> has successfully completed the annual data governance training.</p>
  <p>Date of completion: <strong id="certDate"></strong></p>
  <p>Agency: <strong>Business Registration Authority of Singapore</strong></p>
</div>

<script>
  const correctAnswers = {
    q1: "a",
    q2: ["accuracy", "completeness", "timeliness"],
    q3: "b",
    q4: "b",
    q5: ["follow_procedures", "report_issues", "training"],
    q6: "b",
    q7: "b",
    q8: "b",
    q9: "a",
    q10: ["weak_controls", "ignored_training", "unreported_issues"]
  };

  function arraysEqual(a, b) {
    return a.length === b.length && a.every(val => b.includes(val));
  }

  document.getElementById("quizForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const form = e.target;
    const questions = form.querySelectorAll(".question");
    let allCorrect = true;
    questions.forEach((q, idx) => {
      const qid = "q" + (idx + 1);
      const selected = [...q.querySelectorAll("input:checked")].map(input => input.value);
      const answer = correctAnswers[qid];

      let correct = false;
      if (Array.isArray(answer)) {
        correct = arraysEqual(selected.sort(), answer.sort());
      } else {
        correct = selected[0] === answer;
      }

      let result = q.querySelector(".result");
      if (!result) {
        result = document.createElement("div");
        result.className = "result";
        q.appendChild(result);
      }

      if (correct) {
        result.textContent = "Correct";
        result.classList.remove("incorrect");
      } else {
        allCorrect = false;
        result.innerHTML = `<strong class="highlight-incorrect">Incorrect</strong><div class="review-link">Review: <a href="governance.html#${q.dataset.topic.replace(/\s/g, '')}">${q.dataset.topic}</a></div>`;
        result.classList.add("incorrect");
      }
    });

    if (allCorrect) {
      const certBox = document.getElementById("certificate");
      document.getElementById("certName").textContent = localStorage.getItem("username") || "Staff Member";
      document.getElementById("certDate").textContent = new Date().toLocaleDateString();
      certBox.style.display = "block";
    } else {
      alert("You must answer all questions correctly to pass. Please review the topics and retake.");
    }
  });
</script>
</body>
</html>
