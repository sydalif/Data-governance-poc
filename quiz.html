<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Data Governance Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 20px auto;
      background: #f8f9fa;
      padding: 20px;
    }

    h1 {
      color: #003366;
      text-align: center;
    }

    form {
      background: #fff;
      padding: 25px 30px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .question {
      margin-bottom: 25px;
    }

    .question h3 {
      margin-bottom: 10px;
      color: #004080;
    }

    label {
      display: block;
      margin-bottom: 6px;
      cursor: pointer;
    }

    button {
      background-color: #003366;
      color: white;
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      margin: 20px auto;
      display: block;
    }

    .result {
      background-color: #eef2f7;
      border-left: 5px solid #003366;
      padding: 10px 15px;
      margin-top: 10px;
      border-radius: 4px;
    }

    .incorrect {
      border-left-color: #cc0000;
      background-color: #fce9e9;
    }

    #certificate {
      display: none;
      margin-top: 30px;
      background: #fff;
      border: 2px solid #003366;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    #retakeBtn {
      display: none;
      background-color: #990000;
    }

    #retakeBtn:hover {
      background-color: #770000;
    }
  </style>
</head>
<body>

<h1>Annual Data Governance Quiz</h1>

<form id="quizForm">
  <div id="questionsContainer">
    <!-- Base 10 questions (each has unique ID) -->

    <div class="question" data-topic="Data Governance" id="q1">
      <h3>1. What is the purpose of data governance?</h3>
      <label><input type="radio" name="q1" value="a"> To manage data via policies and responsibilities</label>
      <label><input type="radio" name="q1" value="b"> To store as much data as possible</label>
      <label><input type="radio" name="q1" value="c"> To allow unrestricted access</label>
    </div>

    <div class="question" data-topic="Data Quality" id="q2">
      <h3>2. Which of these are data quality dimensions? (Select all that apply)</h3>
      <label><input type="checkbox" name="q2" value="accuracy"> Accuracy</label>
      <label><input type="checkbox" name="q2" value="timeliness"> Timeliness</label>
      <label><input type="checkbox" name="q2" value="reliability"> Reliability</label>
      <label><input type="checkbox" name="q2" value="confusion"> Confusion</label>
    </div>

    <div class="question" data-topic="Data Protection" id="q3">
      <h3>3. What does data protection focus on?</h3>
      <label><input type="radio" name="q3" value="a"> Data visualization</label>
      <label><input type="radio" name="q3" value="b"> Privacy and security</label>
      <label><input type="radio" name="q3" value="c"> Hardware maintenance</label>
    </div>

    <div class="question" data-topic="Data Access" id="q4">
      <h3>4. Who should have access to confidential data?</h3>
      <label><input type="radio" name="q4" value="a"> All staff</label>
      <label><input type="radio" name="q4" value="b"> Only authorized personnel</label>
      <label><input type="radio" name="q4" value="c"> Public users</label>
    </div>

    <div class="question" data-topic="Data Governance" id="q5">
      <h3>5. What are responsibilities of data stewards? (Select all that apply)</h3>
      <label><input type="checkbox" name="q5" value="policies"> Enforcing data policies</label>
      <label><input type="checkbox" name="q5" value="ignore"> Ignoring outdated data</label>
      <label><input type="checkbox" name="q5" value="training"> Supporting training</label>
      <label><input type="checkbox" name="q5" value="monitoring"> Monitoring compliance</label>
    </div>

    <div class="question" data-topic="Data Exploitation" id="q6">
      <h3>6. What is data exploitation?</h3>
      <label><input type="radio" name="q6" value="a"> Destroying data</label>
      <label><input type="radio" name="q6" value="b"> Using data for insight</label>
      <label><input type="radio" name="q6" value="c"> Ignoring raw data</label>
    </div>

    <div class="question" data-topic="Data Fusion" id="q7">
      <h3>7. What is the goal of data fusion?</h3>
      <label><input type="radio" name="q7" value="a"> Separate data sources</label>
      <label><input type="radio" name="q7" value="b"> Combine multiple data sources for better insight</label>
      <label><input type="radio" name="q7" value="c"> Limit integration</label>
    </div>

    <div class="question" data-topic="Data Quality" id="q8">
      <h3>8. Which issue affects data-driven decision making?</h3>
      <label><input type="radio" name="q8" value="a"> Inaccurate data</label>
      <label><input type="radio" name="q8" value="b"> Bold font</label>
      <label><input type="radio" name="q8" value="c"> Short names</label>
    </div>

    <div class="question" data-topic="Data Protection" id="q9">
      <h3>9. How should data breaches be handled?</h3>
      <label><input type="radio" name="q9" value="a"> Ignored</label>
      <label><input type="radio" name="q9" value="b"> Reported and mitigated</label>
      <label><input type="radio" name="q9" value="c"> Hidden from users</label>
    </div>

    <div class="question" data-topic="Data Access" id="q10">
      <h3>10. What is a secure access method?</h3>
      <label><input type="radio" name="q10" value="a"> Shared accounts</label>
      <label><input type="radio" name="q10" value="b"> Role-based access control</label>
      <label><input type="radio" name="q10" value="c"> Email links</label>
    </div>
  </div>

  <button type="submit">Submit</button>
</form>

<button id="retakeBtn" onclick="location.reload()">Retake Quiz</button>

<div id="certificate">
  <h2>Annual Data Governance Training Acknowledgement</h2>
  <p>This certifies that <strong id="certName">Staff Member</strong> has successfully passed the annual data governance training.</p>
  <p>Date: <strong id="certDate"></strong></p>
  <p>Agency: <strong>Business Registration Authority of Singapore</strong></p>
</div>

<script>
  const correctAnswers = {
    q1: "a",
    q2: ["accuracy", "timeliness", "reliability"],
    q3: "b",
    q4: "b",
    q5: ["policies", "training", "monitoring"],
    q6: "b",
    q7: "b",
    q8: "a",
    q9: "b",
    q10: "b"
  };

  const followUpQuestions = {
    "Data Governance": {
      id: "dg_followup",
      html: `
        <div class="question" data-topic="Data Governance" id="dg_followup">
          <h3>Follow-up: What framework does DAMA advocate for data governance?</h3>
          <label><input type="radio" name="dg_followup" value="a"> DAMA-DMBOK</label>
          <label><input type="radio" name="dg_followup" value="b"> ISO 9001</label>
          <label><input type="radio" name="dg_followup" value="c"> Agile</label>
        </div>`
    },
    "Data Quality": {
      id: "dq_followup",
      html: `
        <div class="question" data-topic="Data Quality" id="dq_followup">
          <h3>Follow-up: Why is timeliness important in data quality?</h3>
          <label><input type="radio" name="dq_followup" value="a"> It makes data trendy</label>
          <label><input type="radio" name="dq_followup" value="b"> It ensures decisions use the most recent data</label>
          <label><input type="radio" name="dq_followup" value="c"> It reduces internet speed</label>
        </div>`
    }
    // Add more topics if needed
  };

  document.getElementById("quizForm").addEventListener("submit", function(e) {
    e.preventDefault();
    const form = e.target;
    const questions = form.querySelectorAll(".question");
    let allCorrect = true;
    const addedFollowUps = new Set();

    questions.forEach(q => {
      const name = q.querySelector("input").name;
      const topic = q.dataset.topic;
      const selected = [...q.querySelectorAll("input:checked")].map(i => i.value);
      const correct = correctAnswers[name];
      let isCorrect = false;

      if (Array.isArray(correct)) {
        isCorrect = selected.sort().toString() === correct.sort().toString();
      } else {
        isCorrect = selected[0] === correct;
      }

      let result = q.querySelector(".result");
      if (!result) {
        result = document.createElement("div");
        result.className = "result";
        q.appendChild(result);
      }

      if (isCorrect) {
        result.textContent = "Correct";
        result.classList.remove("incorrect");
      } else {
        result.textContent = "Incorrect";
        result.classList.add("incorrect");
        allCorrect = false;

        if (followUpQuestions[topic] && !addedFollowUps.has(topic)) {
          const temp = document.createElement("div");
          temp.innerHTML = followUpQuestions[topic].html;
          q.insertAdjacentElement("afterend", temp.firstElementChild);
          addedFollowUps.add(topic);
        }
      }
    });

    if (allCorrect) {
      document.getElementById("certificate").style.display = "block";
      document.getElementById("certDate").textContent = new Date().toLocaleDateString();
      document.getElementById("retakeBtn").style.display = "none";
    } else {
      document.getElementById("retakeBtn").style.display = "block";
      alert("You must answer all questions correctly to receive the certificate. Review and retake.");
    }
  });
</script>

</body>
</html>
